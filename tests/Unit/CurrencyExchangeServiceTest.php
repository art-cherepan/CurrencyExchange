<?php


namespace App\Tests\Unit;



use App\services\CurrencyExchangeService;

class CurrencyExchangeServiceTest extends \PHPUnit\Framework\TestCase
{

    public function testExchangeRateFromUSDtoRub()
    {
        $currencyExchangeService = new CurrencyExchangeService('USD', 'RUB', '{"success":true,"timestamp":1612223999,"historical":true,"base":"EUR","date":"2021-02-01","rates":{"AED":4.432932,"AFN":93.169709,"ALL":122.975271,"AMD":626.201291,"ANG":2.165483,"AOA":791.93839,"ARS":105.72727,"AUD":1.580762,"AWG":2.1723,"AZN":2.058965,"BAM":1.953019,"BBD":2.435894,"BDT":102.298669,"BGN":1.956069,"BHD":0.454907,"BIF":2365.392854,"BMD":1.206833,"BND":1.606588,"BOB":8.318328,"BRL":6.555507,"BSD":1.206464,"BTC":3.5978309e-5,"BTN":87.878822,"BWP":13.25013,"BYN":3.16804,"BYR":23653.928543,"BZD":2.4318,"CAD":1.5506,"CDF":2387.115597,"CHF":1.081932,"CLF":0.032094,"CLP":885.599025,"CNY":7.806396,"COP":4312.026695,"CRC":740.264589,"CUC":1.206833,"CUP":31.981077,"CVE":110.726952,"CZK":25.956514,"DJF":214.478428,"DKK":7.437169,"DOP":70.05685,"DZD":160.240588,"EGP":18.976252,"ERN":18.102584,"ETB":47.537198,"EUR":1,"FJD":2.473641,"FKP":0.882397,"GBP":0.882358,"GEL":3.994798,"GGP":0.882397,"GHS":7.053925,"GIP":0.882397,"GMD":62.176284,"GNF":12192.028083,"GTQ":9.388987,"GYD":252.406729,"HKD":9.35642,"HNL":29.302106,"HRK":7.577581,"HTG":86.821045,"HUF":356.254113,"IDR":17043.500299,"ILS":3.976986,"IMP":0.882397,"INR":88.243695,"IQD":1763.183143,"IRR":50813.707065,"ISK":155.693865,"JEP":0.882397,"JMD":177.055177,"JOD":0.855653,"JPY":126.579935,"KES":132.932977,"KGS":102.336673,"KHR":4905.776474,"KMF":291.854438,"KPW":1086.231889,"KRW":1348.521275,"KWD":0.365526,"KYD":1.005353,"KZT":512.048801,"LAK":11262.166657,"LBP":1834.386696,"LKR":234.046253,"LRD":206.368578,"LSL":18.186854,"LTL":3.563465,"LVL":0.730002,"LYD":5.382698,"MAD":10.840377,"MDL":20.834914,"MGA":4561.828894,"MKD":61.647339,"MMK":1601.527832,"MNT":3445.64752,"MOP":9.634034,"MRO":430.839205,"MUR":47.778215,"MVR":18.588496,"MWK":941.329634,"MXN":24.583986,"MYR":4.87862,"MZN":90.820189,"NAD":18.18672,"NGN":458.597114,"NIO":42.275024,"NOK":10.366401,"NPR":140.605636,"NZD":1.684443,"OMR":0.464559,"PAB":1.206464,"PEN":4.394014,"PGK":4.266179,"PHP":58.042633,"PKR":193.51581,"PLN":4.510002,"PYG":8371.451551,"QAR":4.393778,"RON":4.875361,"RSD":117.43099,"RUB":91.898655,"RWF":1197.646072,"SAR":4.526512,"SBD":9.680382,"SCR":25.591914,"SDG":66.647368,"SEK":10.160829,"SGD":1.607538,"SHP":0.882397,"SLL":12274.699622,"SOS":705.402378,"SRD":17.081549,"STD":25144.202493,"SVC":10.556806,"SYP":618.833924,"SZL":18.271119,"THB":36.19297,"TJS":13.747215,"TMT":4.223916,"TND":3.25702,"TOP":2.778856,"TRY":8.679628,"TTD":8.188814,"TWD":33.74945,"TZS":2798.645229,"UAH":33.847785,"UGX":4439.610377,"USD":1.206833,"UYU":51.061511,"UZS":12720.021444,"VEF":12.053246,"VND":27814.485618,"VUV":131.742364,"WST":3.052819,"XAF":655.014283,"XAG":0.042242,"XAU":0.000649,"XCD":3.261527,"XDR":0.837395,"XOF":652.896602,"XPF":119.77803,"YER":302.192026,"ZAR":18.176897,"ZMK":10862.952226,"ZMW":25.841608,"ZWL":388.600479}}', '2021-02-01');
        $exchangeRate = $currencyExchangeService->exchangeRateForCurrency();
        $this->assertEquals(['from' => 'USD', 'to' => 'RUB', 'date' => '2021-02-01', 'rate' => '76.1507'], $exchangeRate);
    }

    public function testExchangeRateFromEURtoRub()
    {
        $currencyExchangeService = new CurrencyExchangeService('EUR', 'RUB', '{"success":true,"timestamp":1643759999,"historical":true,"base":"EUR","date":"2022-02-01","rates":{"AED":4.140576,"AFN":112.41698,"ALL":121.576036,"AMD":544.535955,"ANG":2.031917,"AOA":593.469347,"ARS":118.487235,"AUD":1.580326,"AWG":2.02965,"AZN":1.917885,"BAM":1.955995,"BBD":2.276443,"BDT":96.93083,"BGN":1.958126,"BHD":0.425047,"BIF":2272.576588,"BMD":1.12727,"BND":1.521162,"BOB":7.762327,"BRL":5.936425,"BSD":1.12742,"BTC":2.9110404e-5,"BTN":84.279382,"BWP":13.018887,"BYN":2.918246,"BYR":22094.494608,"BZD":2.272542,"CAD":1.430449,"CDF":2269.756845,"CHF":1.038339,"CLF":0.032797,"CLP":905.04797,"CNY":7.17059,"COP":4423.227639,"CRC":723.27708,"CUC":1.12727,"CUP":29.872659,"CVE":110.895181,"CZK":24.276912,"DJF":200.338762,"DKK":7.440323,"DOP":64.987033,"DZD":157.829407,"EGP":17.708296,"ERN":16.909074,"ETB":56.248301,"EUR":1,"FJD":2.417036,"FKP":0.820562,"GBP":0.833543,"GEL":3.427186,"GGP":0.820562,"GHS":7.08488,"GIP":0.820562,"GMD":59.801539,"GNF":10167.976677,"GTQ":8.667124,"GYD":235.875137,"HKD":8.786276,"HNL":27.702622,"HRK":7.530274,"HTG":114.505203,"HUF":355.575267,"IDR":16151.864647,"ILS":3.573908,"IMP":0.820562,"INR":84.258088,"IQD":1646.941664,"IRR":47655.344239,"ISK":143.603141,"JEP":0.820563,"JMD":175.856741,"JOD":0.799305,"JPY":129.342413,"KES":128.057315,"KGS":95.58845,"KHR":4582.353145,"KMF":493.687827,"KPW":1014.543297,"KRW":1355.598914,"KWD":0.341056,"KYD":0.9395,"KZT":489.411303,"LAK":12788.879822,"LBP":1705.008279,"LKR":228.30463,"LRD":172.078062,"LSL":17.224977,"LTL":3.328536,"LVL":0.681874,"LYD":5.191037,"MAD":10.611839,"MDL":20.315815,"MGA":4514.716601,"MKD":61.631101,"MMK":2004.571027,"MNT":3222.674987,"MOP":9.052765,"MRO":402.435244,"MUR":49.267044,"MVR":17.416244,"MWK":921.545978,"MXN":23.163344,"MYR":4.718188,"MZN":71.953593,"NAD":17.225164,"NGN":467.546585,"NIO":39.962138,"NOK":9.958051,"NPR":134.847371,"NZD":1.698706,"OMR":0.434008,"PAB":1.12742,"PEN":4.378327,"PGK":3.962356,"PHP":57.671518,"PKR":198.907074,"PLN":4.570573,"PYG":7979.150337,"QAR":4.104389,"RON":4.946349,"RSD":117.57467,"RUB":86.491606,"RWF":1145.306455,"SAR":4.229045,"SBD":9.138831,"SCR":16.402293,"SDG":497.126091,"SEK":10.43222,"SGD":1.520124,"SHP":1.552704,"SLL":12907.242835,"SOS":659.452716,"SRD":23.53684,"STD":23332.215805,"SVC":9.865051,"SYP":2831.702321,"SZL":17.22456,"THB":37.412402,"TJS":12.734075,"TMT":4.249808,"TND":3.248794,"TOP":2.556593,"TRY":15.079377,"TTD":7.640414,"TWD":31.290426,"TZS":2606.248642,"UAH":32.007101,"UGX":3942.620165,"USD":1.12727,"UYU":49.533279,"UZS":12191.426633,"VEF":241044423185.7503,"VND":25532.668514,"VUV":128.13839,"WST":2.944816,"XAF":656.026913,"XAG":0.049821,"XAU":0.000626,"XCD":3.046504,"XDR":0.810086,"XOF":657.759904,"XPF":120.05491,"YER":282.099507,"ZAR":17.213869,"ZMK":10146.788909,"ZMW":20.406475,"ZWL":362.980523}}', '2022-02-01');
        $exchangeRate = $currencyExchangeService->exchangeRateForCurrency();
        $this->assertEquals(['from' => 'EUR', 'to' => 'RUB', 'date' => '2022-02-01', 'rate' => '86.4916'], $exchangeRate);
    }
}